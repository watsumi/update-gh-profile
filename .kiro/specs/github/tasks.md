# Implementation Plan

- [x] 1. プロジェクト基盤とインフラストラクチャのセットアップ
- [x] 1.1 Go プロジェクトの初期化

  - Go モジュールの初期化と依存関係管理の設定
  - プロジェクトディレクトリ構造の作成
  - ビルドと実行の基本設定
  - _Requirements: 全要件の基盤_

- [x] 1.2 依存ライブラリの統合

  - GitHub API クライアント（go-github）の導入
  - 必要な標準ライブラリの確認
  - ビルドとテスト環境の準備
  - _Requirements: 1.1, 1.2_

- [x] 1.3 設定と環境変数管理の実装

  - GitHub トークンとユーザー名の環境変数読み込み
  - 設定値の検証とデフォルト値の設定
  - エラーハンドリングとログ出力の基盤
  - _Requirements: 5.3, 5.4_

- [ ] 2. GitHub API 統合とリポジトリ情報取得機能
- [x] 2.1 リポジトリ一覧取得機能の実装

  - 対象ユーザーの全リポジトリ一覧を取得する機能
  - フォークリポジトリの除外処理
  - ページネーションによる全リポジトリの取得
  - API レート制限の検出と処理
  - _Requirements: 1.1, 1.10, 1.11_

- [x] 2.2 リポジトリ基本メトリクス取得機能の実装

  - 各リポジトリの言語情報取得
  - リポジトリのスター数取得
  - リポジトリの基本統計情報取得
  - エラーハンドリングとリトライ機能
  - _Requirements: 1.2, 1.5_

- [x] 2.3 コミット情報取得機能の実装

  - 各リポジトリのコミット履歴取得
  - コミット数の集計
  - 日付ごとのコミット数の計算
  - コミット時間帯（UTC）の抽出
  - _Requirements: 1.4, 1.7, 1.8_

- [x] 2.4 コミットごとの言語使用状況取得機能の実装

  - 各コミットの変更ファイル情報取得
  - 変更ファイルから言語の判定
  - コミット SHA と使用言語のマッピング
  - パフォーマンス最適化（並列処理の検討）
  - _Requirements: 1.9_

- [x] 2.5 プルリクエスト情報取得機能の実装

  - 各リポジトリのプルリクエスト数取得
  - ページネーションによる全 PR の集計
  - エラー時の処理とログ記録
  - _Requirements: 1.6_

- [ ] 3. メトリクスデータの集計と分析機能
- [x] 3.1 言語データ集計機能の実装

  - 全リポジトリの言語データを統合
  - 言語ごとの総バイト数計算
  - 言語ごとの使用リポジトリ数計算
  - フォークリポジトリの除外処理
  - _Requirements: 2.1, 2.2_

- [x] 3.2 言語ランキング生成機能の実装

  - 使用量による言語のソート
  - パーセンテージ計算
  - 閾値以下の言語の除外
  - ランキングデータ構造の生成
  - _Requirements: 2.3, 2.4_

- [x] 3.3 コミット推移集計機能の実装

  - 全リポジトリの日付ごとコミット数を統合
  - 日付順のソートと時系列データ生成
  - データ構造の最適化
  - _Requirements: 2.5_

- [x] 3.4 コミット時間帯集計機能の実装

  - 全リポジトリの時間帯ごとコミット数を統合
  - 24 時間帯（0-23 時）のデータ生成
  - 時間帯別の集計とソート
  - _Requirements: 2.6_

- [x] 3.5 コミットごとの言語 Top5 集計機能の実装

  - 全コミットの言語使用状況を統合
  - 言語ごとの使用回数カウント
  - 使用回数によるソートと Top5 抽出
  - _Requirements: 2.7_

- [x] 3.6 サマリー統計集計機能の実装

  - 全リポジトリの合計スター数計算
  - リポジトリ数の集計
  - 総コミット数の集計
  - 総プルリクエスト数の集計
  - _Requirements: 2.8_

- [ ] 3.7 メトリクスデータ保存機能の実装

  - 集計結果を JSON 形式で保存
  - ファイルパスとエンコーディングの管理
  - エラーハンドリング
  - _Requirements: 2.9_

- [ ] 4. SVG グラフ生成機能
- [ ] 4.1 SVG 生成基盤の実装

  - SVG テンプレート構造の定義
  - 共通スタイリングとレイアウト機能
  - グラフの基本レイアウトヘルパー関数
  - _Requirements: 3.6, 3.7_

- [ ] 4.2 言語ランキング SVG 生成機能の実装

  - ランキングデータから SVG グラフ生成
  - 言語名、使用量、パーセンテージの表示
  - バーグラフまたはリスト形式の可視化
  - モダンなデザインの適用
  - _Requirements: 3.1, 3.6_

- [ ] 4.3 コミット推移 SVG 生成機能の実装

  - 時系列データから折れ線グラフまたはエリアグラフ生成
  - 日付軸とコミット数軸の表示
  - グリッド線と凡例の追加
  - 見やすいカラースキームの適用
  - _Requirements: 3.2, 3.6_

- [ ] 4.4 コミットごとの言語 Top5 SVG 生成機能の実装

  - Top5 言語データからグラフ生成
  - パイチャートまたは棒グラフ形式の選択
  - 言語名と使用回数の表示
  - 視覚的にわかりやすいデザイン
  - _Requirements: 3.3, 3.6_

- [ ] 4.5 コミット時間帯 SVG 生成機能の実装

  - 24 時間帯データからヒートマップまたはバーグラフ生成
  - 時間帯（0-23 時）の表示
  - コミット数の可視化
  - 時間帯ごとの色分け表示
  - _Requirements: 3.4, 3.6_

- [ ] 4.6 サマリーカード SVG 生成機能の実装

  - スター数、リポジトリ数、コミット数、PR 数を表示するカード形式 SVG
  - 各メトリクスにアイコンと数値を配置
  - 見やすいレイアウトとスタイリング
  - レスポンシブなサイズ設計
  - _Requirements: 3.5, 3.6_

- [ ] 4.7 SVG ファイル保存機能の実装

  - 生成した SVG をファイルシステムに保存
  - UTF-8 エンコーディングの保証
  - ファイルパス管理とエラーハンドリング
  - _Requirements: 3.8_

- [ ] 5. README.md 更新機能
- [ ] 5.1 README ファイル操作機能の実装

  - README.md ファイルの読み込み
  - コメントタグ（START/END）の検出
  - タグ間コンテンツの抽出と置換
  - 既存コンテンツの保持
  - _Requirements: 4.1, 4.2_

- [ ] 5.2 SVG グラフ埋め込み機能の実装

  - 生成した各 SVG ファイルを README に埋め込み
  - 適切な Markdown 記法での画像埋め込み
  - グラフの順序とレイアウト管理
  - _Requirements: 4.3_

- [ ] 5.3 更新日時記録機能の実装

  - 最終更新日時の記録と表示
  - タイムゾーン処理
  - 日時フォーマットの統一
  - _Requirements: 4.4_

- [ ] 5.4 Git 操作機能の実装

  - 変更ファイルの検出
  - Git コミットの実行
  - Git プッシュの実行
  - エラーハンドリングとログ記録
  - _Requirements: 4.5, 4.6_

- [ ] 6. メイン処理とワークフロー統合
- [ ] 6.1 メイン処理フローの実装

  - 各コンポーネントを統合するメイン処理
  - 処理順序の制御とエラーハンドリング
  - ログ出力と進捗表示
  - 終了コードの適切な設定
  - _Requirements: 全要件の統合_

- [ ] 6.2 エラーハンドリングとロギング機能の強化

  - 各段階でのエラーハンドリング
  - ログレベルの設定と出力
  - エラー時の適切な終了処理
  - _Requirements: 5.5, 5.6_

- [ ] 7. GitHub Actions ワークフローの設定
- [ ] 7.1 ワークフローファイルの作成

  - GitHub Actions ワークフロー YAML ファイルの作成
  - スケジュール実行（cron）の設定
  - 手動実行（workflow_dispatch）の設定
  - 必要な権限（contents: write）の設定
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 7.2 Go ビルドと実行環境の設定

  - Go 環境のセットアップ
  - 依存関係のインストール
  - バイナリのビルドと実行
  - 環境変数の設定
  - _Requirements: 5.1, 5.4_

- [ ] 7.3 ワークフローのテストと検証

  - ワークフローの動作確認
  - エラーケースのテスト
  - ログ出力の確認
  - _Requirements: 5.5, 5.6_

- [ ] 8. テストと品質保証
- [ ] 8.1 単体テストの実装

  - 各モジュールの単体テスト作成
  - モックを使用した API クライアントテスト
  - データ集計機能のテスト
  - SVG 生成機能のテスト
  - _Requirements: テスト要件全般_

- [ ] 8.2 統合テストの実装

  - エンドツーエンドのワークフローテスト
  - README 更新処理のテスト
  - Git 操作のテスト
  - _Requirements: テスト要件全般_

- [ ] 8.3 エラーケースのテスト
  - API エラー時の動作確認
  - ファイル操作エラーのテスト
  - Git 操作エラーのテスト
  - _Requirements: 5.6_
